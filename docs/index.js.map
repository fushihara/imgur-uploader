{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { UploadImageElement } from \"./upload-image-element.js\";\r\nimport { blobから画像を取得する, 画像を指定サイズにリサイズ } from \"./utils.js\";\r\nconst localStorageKey = {\r\n  apiToken: \"api-token-gtibku21\",\r\n  解像度: \"resolution-3cwyh4nt\",\r\n  pngのjpg変換強制: \"png-to-jpg-6aibey2g\",\r\n  urlの自動コピー: \"url-auto-copk88c22ody-xncg7wct\"\r\n}\r\nconst ドロップdiv: HTMLDivElement = document.querySelector<HTMLDivElement>(\"#drop\")!;\r\nconst テキストエリア: HTMLTextAreaElement = document.querySelector<HTMLTextAreaElement>(\"#textarea\")!;\r\nconst コピーボタン: HTMLButtonElement = document.querySelector<HTMLButtonElement>(\"#copy\")!;\r\nconst クリアボタン: HTMLButtonElement = document.querySelector<HTMLButtonElement>(\"#clear\")!;\r\nconst 画像リサイズ指定一覧 = [\r\n  { radio: document.querySelector<HTMLInputElement>(`input[name=\"resize\"][value=\"unlimited\"]`)!, size: null },\r\n  { radio: document.querySelector<HTMLInputElement>(`input[name=\"resize\"][value=\"1920\"]`)!, size: 1920 },\r\n  { radio: document.querySelector<HTMLInputElement>(`input[name=\"resize\"][value=\"1600\"]`)!, size: 1600 },\r\n  { radio: document.querySelector<HTMLInputElement>(`input[name=\"resize\"][value=\"1280\"]`)!, size: 1280 },\r\n  { radio: document.querySelector<HTMLInputElement>(`input[name=\"resize\"][value=\"1024\"]`)!, size: 1024 },\r\n  { radio: document.querySelector<HTMLInputElement>(`input[name=\"resize\"][value=\"854\"]`)!, size: 854 },\r\n];\r\nconst pngの変換を強制: HTMLInputElement = document.querySelector<HTMLInputElement>(\"#pngtojpg\")!;\r\nconst URLの自動コピー: HTMLInputElement = document.querySelector<HTMLInputElement>(\"#autocopy\")!;\r\nconst 画像一覧div: HTMLDivElement = document.querySelector<HTMLDivElement>(\"#image-list\")!;\r\nconst apiToken: HTMLInputElement = document.querySelector<HTMLInputElement>(\"#api-token\")!;\r\n// localStorageの設定を復元\r\n/*if (localStorage.getItem(localStorageKey.apiToken) != null) {\r\n  apiToken.value = localStorage.getItem(localStorageKey.apiToken)!;\r\n}\r\napiToken.addEventListener(\"change\", () => { localStorage.setItem(localStorageKey.apiToken, apiToken.value); });\r\napiToken.addEventListener(\"keyup\", () => { localStorage.setItem(localStorageKey.apiToken, apiToken.value); });*/\r\nif (localStorage.getItem(localStorageKey.解像度) != null) {\r\n  const a = localStorage.getItem(localStorageKey.解像度);\r\n  画像リサイズ指定一覧.forEach(b => {\r\n    if (b.size == a) {\r\n      b.radio.checked = true;\r\n    }\r\n  })\r\n}\r\n画像リサイズ指定一覧.forEach(b => {\r\n  b.radio.addEventListener(\"click\", () => { localStorage.setItem(localStorageKey.解像度, b.radio.value); });\r\n});\r\nif (localStorage.getItem(localStorageKey.pngのjpg変換強制) !== null) {\r\n  pngの変換を強制.checked = localStorage.getItem(localStorageKey.pngのjpg変換強制) == \"yes\";\r\n}\r\npngの変換を強制.addEventListener(\"click\", () => { localStorage.setItem(localStorageKey.pngのjpg変換強制, pngの変換を強制.checked ? \"yes\" : \"no\"); })\r\nif (localStorage.getItem(localStorageKey.urlの自動コピー) !== null) {\r\n  URLの自動コピー.checked = localStorage.getItem(localStorageKey.urlの自動コピー) == \"yes\";\r\n}\r\nURLの自動コピー.addEventListener(\"click\", () => { localStorage.setItem(localStorageKey.urlの自動コピー, URLの自動コピー.checked ? \"yes\" : \"no\"); })\r\n\r\n\r\n//@ts-ignore\r\nnavigator.permissions.query({ name: 'clipboard-write' });\r\nクリアボタン.addEventListener(\"click\", () => { クリアボタン押下() });\r\nコピーボタン.addEventListener(\"click\", () => {\r\n  //@ts-ignore\r\n  navigator.clipboard.writeText(テキストエリア.value);\r\n});\r\ndocument.addEventListener('dragover', (ev) => {\r\n  ev.preventDefault();\r\n  ev.dataTransfer!.dropEffect = 'copy';\r\n  ドロップdiv.style.display = \"flex\";\r\n});\r\ndocument.addEventListener('drop', (ev) => {\r\n  ev.preventDefault();\r\n  ドロップdiv.style.display = \"none\";\r\n  const dataTransfar = ev.dataTransfer;\r\n  if (dataTransfar == null) { return; }\r\n  for (let item of dataTransfar.items) {\r\n    if (item.kind != \"file\" || !item.type.startsWith(\"image/\")) {\r\n      continue;\r\n    }\r\n    const file = item.getAsFile();\r\n    const mime = item.type;\r\n    if (file == null) {\r\n      continue;\r\n    }\r\n    画像をリストに追加する(file, mime);\r\n  }\r\n});\r\n\r\nwindow.addEventListener(\"paste\", async (e: ClipboardEvent) => {\r\n  const clipboardData = e.clipboardData;\r\n  if (!clipboardData) { return; }\r\n  if (clipboardData.types.length == 0) { return; }\r\n  for (let item of clipboardData.items) {\r\n    if (item.kind != \"file\" || !item.type.startsWith(\"image/\")) {\r\n      continue;\r\n    }\r\n    const file = item.getAsFile();\r\n    const mime = item.type;\r\n    if (file == null) {\r\n      continue;\r\n    }\r\n    画像をリストに追加する(file, mime);\r\n  }\r\n});\r\nasync function 画像をリストに追加する(変換元のファイル: Blob, オリジナルのmime: string) {\r\n  const newElement = new UploadImageElement();\r\n  const { ファイル, mime } = await 画像のフォーマットを変換(変換元のファイル, オリジナルのmime);\r\n  const apiトークン = /* apiToken.value*/ \"18a9918461819bb\";\r\n  //@ts-ignore\r\n  if (apiトークン == \"\") {\r\n    alert(\"imgurのapiトークンが無いとアップロードできません。\\n登録は無料で行えますので、フッターにapiToken登録方法のページを確認後、テキストボックスにキーを入れてください。\");\r\n  }\r\n  const promise = newElement.画像のファイルをセット(ファイル, mime, apiトークン);\r\n  let 最後に画像を追加する: boolean = true;\r\n  //@ts-ignore\r\n  if (最後に画像を追加する == false && 画像一覧div.firstChild) {\r\n    画像一覧div.insertBefore(newElement, 画像一覧div.firstChild);\r\n  } else {\r\n    画像一覧div.appendChild(newElement);\r\n  }\r\n  await promise;\r\n  画像のURL一覧を更新();\r\n}\r\nfunction 画像のURL一覧を更新() {\r\n  const result: string[] = [];\r\n  for (let a of 画像一覧div.children) {\r\n    if (a instanceof UploadImageElement) {\r\n      const b = a.アップロードした画像のURLかnullを取得();\r\n      if (b != null) {\r\n        result.push(b);\r\n      }\r\n    }\r\n  }\r\n  テキストエリア.value = result.join(\"\\n\");\r\n  if (URLの自動コピー.checked) {\r\n    //@ts-ignore\r\n    navigator.clipboard.writeText(result.join(\"\\n\"));\r\n  }\r\n}\r\nasync function 画像のフォーマットを変換(ファイル: Blob, mime: string): Promise<{ ファイル: Blob, mime: string }> {\r\n  const isGif = mime.endsWith(\"/gif\");\r\n  const isPng = mime.endsWith(\"/png\");\r\n  const pngのjpg変換強制 = pngの変換を強制.checked;\r\n  const 画像オブジェクト = await blobから画像を取得する(ファイル);\r\n  const 画像の解像度 = { width: 画像オブジェクト.width, height: 画像オブジェクト.height };\r\n  const リサイズ解像度 = 画像リサイズ指定一覧.find(a => a.radio.checked)!.size;\r\n  if (isGif) {\r\n    //そのまま;\r\n    return {\r\n      ファイル: ファイル,\r\n      mime: mime\r\n    };\r\n  } else if (リサイズ解像度 == null || Math.max(画像の解像度.width, 画像の解像度.height) <= リサイズ解像度) {\r\n    if (isPng && pngのjpg変換強制 == false) {\r\n      return {\r\n        ファイル: ファイル,\r\n        mime: mime\r\n      };\r\n    } else if (isPng) {\r\n      const { blob } = await 画像を指定サイズにリサイズ(画像オブジェクト, null, \"jpg\")\r\n      return {\r\n        ファイル: blob,\r\n        mime: \"image/jpeg\"\r\n      };\r\n    } else {\r\n      return {\r\n        ファイル: ファイル,\r\n        mime: mime\r\n      };\r\n    }\r\n  } else /*リサイズの必要あり*/ {\r\n    if (isPng && pngのjpg変換強制 == false) {\r\n      const { blob } = await 画像を指定サイズにリサイズ(画像オブジェクト, リサイズ解像度, \"png\");\r\n      return {\r\n        ファイル: blob,\r\n        mime: \"image/png\"\r\n      };\r\n    } else {\r\n      const { blob } = await 画像を指定サイズにリサイズ(画像オブジェクト, リサイズ解像度, \"jpg\");\r\n      return {\r\n        ファイル: blob,\r\n        mime: \"image/jpeg\"\r\n      };\r\n    }\r\n  }\r\n}\r\nfunction クリアボタン押下() {\r\n  while (画像一覧div.firstChild) {\r\n    画像一覧div.removeChild(画像一覧div.firstChild);\r\n  }\r\n  テキストエリア.value = \"\";\r\n}"]}